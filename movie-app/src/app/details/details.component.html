<div class="container unselectable">
  <app-preview></app-preview>

  <div class="content">
    <div class="main">
      <div class="reccomendations" *ngIf="dataReady(recommendations)">
        <app-panel
          *ngIf="recommendations.results.length"
          title="Recommendations"
          [hideFiltersBtn]="true"
          (fetchNewPage)="fetchRecommendationsData($event)"
          [paginatorData]="{
            length: recommendations.total_results,
            pageSize: recommendations.results.length
          }"
          height="585px"
        >
          <ng-container ngProjectAs="panel-content">
            <app-loading-spinner
              *ngIf="!recommendations.results.length"
            ></app-loading-spinner>

            <app-card
              *ngFor="let item of recommendations.results"
              [item]="item"
              [media_type]="media_type"
              route="/details"
            ></app-card>
          </ng-container>
        </app-panel>
      </div>

      <div class="reviews" *ngIf="dataReady(reviews)">
        <app-panel
          [hideFiltersBtn]="true"
          title="Reviews"
          (fetchNewPage)="setReviewId($event)"
          [paginatorData]="{
            length: reviews.results.length,
            pageSize: 1
          }"
        >
          <ng-container ngProjectAs="panel-content">
            <mat-card
              [class.mat-elevation-z2]="true"
              style="background: #616161"
            >
              <mat-card-subtitle>{{
                reviews.results[reviewIndex - 1].updated_at
                  ? (reviews.results[reviewIndex - 1].updated_at | date)
                  : (reviews.results[reviewIndex - 1].created_at | date)
              }}</mat-card-subtitle>
              <mat-card-title>{{
                reviews.results[reviewIndex - 1].author
              }}</mat-card-title>
              <mat-card-content>{{
                reviews.results[reviewIndex - 1].content
              }}</mat-card-content>
            </mat-card>
          </ng-container>
        </app-panel>
      </div>
    </div>
    <div class="side">
      <div class="facts">
        <mat-card>
          <mat-card-content>
            <div><span>Status: </span> {{ item.status }}</div>
            <div>
              <span>Original Language: </span>{{ item.original_language }}
            </div>
            <div>
              <span>Budget: </span>
              {{ item.budget ? (item.budget | currency) : "No Information" }}
            </div>
            <div>
              <span>Revenue: </span>
              {{ item.revenue ? (item.revenue | currency) : "No Information" }}
            </div>
            <div><span>Vote Count: </span> {{ item.vote_count | number }}</div>
            <div *ngIf="item.homepage !== ''">
              <span>Homepage: </span>
              <a [href]="item.homepage" target="_blank">Website Link</a>
            </div>
          </mat-card-content>
        </mat-card>
      </div>

      <div class="keywords">
        <mat-chip-list>
          <mat-chip *ngFor="let keyword of keywords.keywords">{{
            keyword.name
          }}</mat-chip>
        </mat-chip-list>
      </div>
    </div>
  </div>
</div>
